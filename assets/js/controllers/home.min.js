var AQUATIC="水棲";var ANTHROPOID="人間・類人猿";var MAMMALS="哺乳類";var REPTILES="爬虫類";angular.module("umania").config(function(a){a.state("home",{controller:"HomeController",resolve:{cryptids:function(c){var b=c.defer();
d3.csv("cryptids.csv",function(e){return{lat:+e.lat,lon:+e.lon,category:f(),popularity:Math.random()};function f(){var d=Math.random();if(d<0.25){return AQUATIC;
}else{if(d<0.5){return ANTHROPOID;}else{if(d<0.75){return MAMMALS;}else{return REPTILES;}}}}},function(d){b.resolve(d);});return b.promise;},data:function(c){var b=c.defer();
d3.json("map.json",function(d){b.resolve(d);});return b.promise;}},templateUrl:"partials/home.html",url:"/home"});}).controller("HomeController",function(b,a,d){b.infoCount=2;
d3.select("#map").call(c({cryptids:a,geo:topojson.feature(d,d.objects.countries),width:320,height:320}));function c(n){var g=n.cryptids;var h=n.geo;var e=n.width;
var l=n.height;var k=d3.geo.mercator().rotate([225,0,0]).translate([472,472]);var m=d3.geo.path().projection(k);var f=d3.scale.linear().domain(d3.extent(g,function(o){return o.popularity;
})).range([10,40]);var j=e/944;var i=l/944;return function(o){o.attr({width:e,height:l});o.append("rect").classed("background",true).attr({width:e,height:l});
var p=o.append("g").classed("contents",true).attr("transform","scale("+j+","+i+")");p.selectAll("path.country").data(h.features).enter().append("path").classed("country",true).attr("d",m);
p.selectAll("circle.cryptids").data(g).enter().append("circle").classed({cryptids:true,aquatic:function(q){return q.category.indexOf(AQUATIC)>=0;},anthropoid:function(q){return q.category.indexOf(ANTHROPOID)>=0;
},mammals:function(q){return q.category.indexOf(MAMMALS)>=0;},reptiles:function(q){return q.category.indexOf(REPTILES)>=0;}}).attr({cx:function(q){return k([q.lon,q.lat])[0];
},cy:function(q){return k([q.lon,q.lat])[1];},r:function(q){return f(q.popularity);}});};}});